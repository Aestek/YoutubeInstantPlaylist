!!! 5
html(lang='en', ng-app='app')
	head
		meta(charset='utf-8')
		title YoutubeInstantPlaylist

		meta(name='viewport', content='width=device-width')
		
		link(href='lib/bootstrap/less/bootstrap.css', rel='stylesheet', type='text/css')
		link(href='lib/bootstrap/less/responsive.css', rel='stylesheet', type='text/css')
		link(href='stylesheets/remote/remote.css', rel='stylesheet', type='text/css')

		script(src='lib/jquery/jquery-1.7.1.min.js', type='text/javascript')
		script(src='lib/angular.min.js', type='text/javascript')
		script(src='lib/angular-ui/angular-ui.js', type='text/javascript')
		script(src='lib/angular-ui/ui-bootstrap-0.1.0.js', type='text/javascript')
		script(src='/socket.io/socket.io.js', type='text/javascript')

		script
			var sessionUser = !{user};

		script(src='javascripts/app.js', type='text/javascript')
		script(src='javascripts/services.js', type='text/javascript')
		script(src='javascripts/remote-controllers.js', type='text/javascript')
		script(src='javascripts/directives.js', type='text/javascript')
		script(src='javascripts/filters.js', type='text/javascript')

	body(ng-controller='MainCtrl')
		.navbar.navbar-static-top
			.navbar-inner 
				span.brand YoutubeInstantPlaylist

				ul.nav.pull-right
					li(ng-show='user.displayName') Connected as {{user.displayName}}

		.container-fluid
			div(ng-show='currentVideo.id')
				h1 Now playing : 
				
				#controls.btn-group
					button.btn.btn-large(ng-click='prev()')
						i.icon-step-backward
					button.btn.btn-large(ng-click='next()')
						i.icon-step-forward

				a.current-video(
					back-img='{{currentVideo.thumbnail.hqDefault}}',
					href='{{currentVideo.player.mobile}}',
					target='_blank'
				)
					.title {{currentVideo.title}}
				


			h1 Search a video to add
			input(
				type='search', 
				ng-model='searchQuery',
				ui-keypress='{13: \'search(searchQuery)\'}'
			)

			ul.vertical-video-list
				li.no-result(ng-show='searchResults == false')
					| Your search yieled no result
				li(
					ng-repeat='result in searchResults',
					title='{{result.title}}',
					ng-click='addVideo(result)'
				)

					.img(back-img='{{result.thumbnail.hqDefault}}')
						.length {{result.duration | secToTime}}
					.title {{result.title}}
					.infos
						| Views : {{result.viewCount}}

		.modal.start-modal(ng-show='startModalVisible')
			.modal-header
				h3 Make it personnal
			.modal-body
				p Choose a username (will be displayed in the player) :
					br
					input(type='text', ng-model='userName')
				p Or 
				p
					a(href='/auth/facebook/')
						img(src='/images/facebook-connect-button.png')

			.modal-footer
				button.btn.btn-primary(ng-click='submitUser()') Ok
