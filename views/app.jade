!!! 5
html(lang='en', ng-app='app')
	head
		meta(charset='utf-8')
		title YoutubeInstantPlaylist
		
		link(href='lib/bootstrap/less/bootstrap.css', rel='stylesheet', type='text/css')
		link(href='stylesheets/app/app.css', rel='stylesheet', type='text/css')

		script(src='lib/jquery/jquery-1.7.1.min.js', type='text/javascript')
		script(src='lib/jquery/jquery-ui-1.8.21.custom.min.js', type='text/javascript')
		script(src='lib/jquery/jquery-ui-sortables-custom.js', type='text/javascript')
		script(src='lib/bootstrap/js/bootstrap.min.js', type='text/javascript')
		script(src='lib/angular.min.js', type='text/javascript')
		script(src='lib/angular-ui/angular-ui.js', type='text/javascript')
		script(src='lib/jquery.tinyscrollbar.min.js', type='text/javascript')
		script(src='lib/swfobject.js', type='text/javascript')
		script(src='lib/particle.js', type='text/javascript')
		script(src='/socket.io/socket.io.js', type='text/javascript')
		script(src='lib/jquery.qrcode.js', type='text/javascript')

		script(src='javascripts/app.js', type='text/javascript')
		script(src='javascripts/services.js', type='text/javascript')
		script(src='javascripts/app-controllers.js', type='text/javascript')
		script(src='javascripts/directives.js', type='text/javascript')
		script(src='javascripts/filters.js', type='text/javascript')


	body(ng-controller='MainCtrl')

		// search
		.well.row12.col5(ng-controller='SearchCtrl')
			input.search-youtube.title(
				type='text', 
				placeholder='Search Youtube', 
				ng-model='searchQuery',
				ui-keypress='{13: \'search(searchQuery)\'}',
				bs-typeahead='findAutocomplete',
				bs-typeahead-updater='search'
			)
	
			.block-content
				.no-content(ng-show='searchResults.length == 0') Your search yieled no result
				.no-content(ng-show='searchResults == -1') &uarr; 
					br
					| Search videos to add in your playlist
				div(scrollable='y', scroll-bind='searchResults')
					.scrollbar
						.track
							.thumb

					.viewport
						.overview
							ul.vertical-video-list
								li(
									ng-repeat='result in searchResults',
									title='{{result.title}}',
									ng-click='addVideo(result)'
								)
				
									.img(back-img='{{result.thumbnail.hqDefault}}')
										.length {{result.duration | secToTime}}
									.title {{result.title}}
									.infos
										| Views : {{result.viewCount}}


		// player
		.well.col7.coloffset5.row9
			.title(
				background-progressbar, 
				fgcolor='rgba(86, 173, 0, 0.8)', 
				bgcolor='rgba(0,0,0, 0.6)', 
				progress='currentVideoProgress'
			) {{currentVideo.title}}
				
			.block-content
				.no-content(ng-show='!currentVideo.id') Select a video to play

				.player-container
					div(
						youtube-player, 
						video='currentVideo', 
						current-time='currentTime',
						player-state='playerState'
					)
		// remote

		#remote(ng-controller='RemoteCtrl')
			.well.col4.coloffset12.row2
				//.title Added by

				#added-by.block-content.block-padding
					img.added-by-picture(
						src='https://graph.facebook.com/{{currentAddedBy.id}}/picture',
						ng-show='currentAddedBy.id'
					)
					| This video was added by 
					a {{currentAddedBy.displayName || 'you'}}
					|  to the playlist

			.well.col4.coloffset12.row3.rowoffset2
				div(
					qr-code='http://{{appDomain}}/remote?k={{roomId}}', 
					width='1000', 
					height='1000',
					fgcolor='#424242', 
					bgcolor='transparent'
				) 
				p.block-padding Scan this qrcode to control the player with your phone !

			.well.col4.coloffset12.row4.rowoffset5
				.title Connected remotes
				.block-content(scrollable='y', scroll-bind='connectedRemotes')
					.scrollbar
						.track
							.thumb

					.viewport
						.overview
							ul.remote-list
								li(
									ng-repeat='remote in connectedRemotes'
								)
									img.pull-right(
										ng-src='https://graph.facebook.com/{{remote.id}}/picture',
										ng-show='remote.id'
									)
									| {{remote.displayName}}


		
			
		
		// related 
		.col11.coloffset5.row3.rowoffset9
			.well(
				scrollable='x', 
				scroll-bind='currentVideo.relatedVideos'
			)
				.viewport
					ul.horizontal-video-list.overview
						li(
							ng-repeat='video in currentVideo.relatedVideos', 
							ng-click='addVideo(video)'
						)
							.img(back-img='{{video.thumbnail.hqDefault}}')
								.title-container {{video.title}}
								.duration {{video.duration | secToTime}}

				.scrollbar
					.track
						.thumb

		//playlist
		.well.col16.row4.rowoffset12(ng-controller='PlaylistCtrl')
			.title(
				background-progressbar, 
				fgcolor='rgba(86, 173, 0, 0.8)', 
				bgcolor='rgba(0,0,0, 0.6)', 
				progress='playlistProgress'
			)
				#playlistPosition {{currentPosition + 1}}/{{playlist.length}}
				#playlistTime {{playedDuration + currentTime | secToTime}} / {{totalDuration | secToTime}}

				button.btn.btn-danger.pull-right(ng-click='removeAll()')
					i.icon-remove-sign.icon-white
					|  Clear

				#playlist-control.btn-group
					button.btn.btn-large(
						ng-click='setIndex(currentPosition - 1)',
						ng-disabled='currentPosition <= 0'
					)
						i.icon-step-backward
					button.btn.btn-large(
						ng-click='setIndex(currentPosition + 1)',
						ng-disabled='currentPosition == playlist.length - 1'
					)
						i.icon-step-forward

			.block-content
				div.no-content(ng-show='playlist.length == 0') Your playlist is currently empty :(
				div(scrollable='x', scroll-bind='playlist')
					.viewport
						ul.horizontal-video-list.overview(
							ui-sortable,
							ui-options='{axis: "x", forcePlaceholderSize: true}'
							ng-model='playlist'
						)
							li(
								ng-repeat='item in playlist', 
								ng-click='setIndex($index)',
								ng-class='(currentPosition == $index) && "playing"'
							)
								.img(back-img='{{item.video.thumbnail.hqDefault}}')
									.title-container {{item.video.title}}

									.buttons
										button.btn.btn-danger(ng-click='removeAt($index)')
											i.icon-remove-sign.icon-white

									.duration {{item.video.duration | secToTime}}

									.addedBy(
										ng-show='item.addedBy', 
										back-img='https://graph.facebook.com/{{item.addedBy.id}}/picture'
									)

									.playlist-id {{$index + 1}}

					.scrollbar
						.track
							.thumb